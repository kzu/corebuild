<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<!-- Import NuGet.targets for Restore -->
	<PropertyGroup>
		<NuGetRestoreTargets Condition="'$(NuGetRestoreTargets)'==''">$(MSBuildExtensionsPath)\..\Common7\IDE\CommonExtensions\Microsoft\NuGet\NuGet.targets</NuGetRestoreTargets>
	</PropertyGroup>
	<Import Condition="Exists('$(NuGetRestoreTargets)')" Project="$(NuGetRestoreTargets)" />

	<Import Project="$(RestoreOutputPath)\$(MSBuildProjectFile).nuget.g.targets"
			Condition="Exists('$(RestoreOutputPath)\$(MSBuildProjectFile).nuget.g.targets') And '$(SelfUpdating)' != 'true'" />

	<!-- Unfortunately, NuGet restore depends on this target for its _GenerateRestoreProjectReferencePaths target -->
	<Target Name="_SplitProjectReferencesByFileExistence" />
	
	<!-- For self-updating -->
	<Import Project="updater.targets" Condition="'$(UpdaterImported)' != 'true'" />
	<PropertyGroup>
		<_Etag />
		<_Self>$(MSBuildThisFileFullPath)</_Self>
		<_SelfUrl>$(_SelfBaseUrl)/$(MSBuildThisFilename)$(MSBuildThisFileExtension)</_SelfUrl>
	</PropertyGroup>

	<!-- If we're being imported from another project, import the update-all version of Update -->
	<Import Project="update-all.targets" Condition="'$(MSBuildProjectFullPath)' != '(MSBuildThisFileFullPath)' And '$(IsUpdating)' != 'true'" />
</Project>